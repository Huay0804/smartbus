{% extends "base.html" %}
{% block title %}Đăng ký{% endblock %}
{% block content %}
<div class="sb-auth-wrap">
  <div class="sb-box p-0 sb-auth-card">
    <div class="sb-auth-aside">
      <div class="d-flex align-items-center gap-3 mb-3">
        <img class="sb-auth-logo" src="{{ static_url('img/logo.svg') }}" alt="SmartBus">
        <div>
          <h3>Tạo tài khoản</h3>
          <p class="mb-0">Dùng để đăng ký thẻ xe và theo dõi trạng thái thẻ.</p>
        </div>
      </div>

      <div class="sb-auth-pills">
        <span class="sb-auth-pill">Đăng ký thẻ</span>
        <span class="sb-auth-pill">Quản lý trạng thái</span>
        <span class="sb-auth-pill">Tra cứu chuyến/trạm</span>
      </div>

      <div class="mt-3 sb-auth-help" style="color: rgba(255,255,255,0.70);">
        Bạn có thể xem tuyến xe mà không cần đăng nhập.
      </div>
    </div>

    <div class="sb-auth-form">
      <div class="d-flex justify-content-between align-items-start gap-3 mb-3">
        <div>
          <h2 class="mb-1">Đăng ký</h2>
          <div class="text-muted small">Tạo nhanh, đủ dùng cho demo và triển khai sau này.</div>
        </div>
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('routes') }}">Xem tuyến</a>
      </div>

      <form method="post" action="{{ url_for('register') }}">
        <div class="mb-3">
          <label class="form-label">Họ và tên</label>
          <input type="text" name="full_name" class="form-control" autocomplete="name" placeholder="Nguyễn Văn A" required>
        </div>

        <div class="mb-3">
          <label class="form-label">Email</label>
          <div class="input-group">
            <span class="input-group-text" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M4 6.5C4 5.12 5.12 4 6.5 4H17.5C18.88 4 20 5.12 20 6.5V17.5C20 18.88 18.88 20 17.5 20H6.5C5.12 20 4 18.88 4 17.5V6.5Z" stroke="currentColor" stroke-width="1.8"/>
                <path d="M6 7.5L12 12L18 7.5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
            <input type="email" name="email" class="form-control" autocomplete="email" placeholder="you@email.com" required>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Mật khẩu</label>
          <div class="input-group">
            <span class="input-group-text" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M7 10V7.5C7 4.46 9.46 2 12.5 2C15.54 2 18 4.46 18 7.5V10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                <path d="M6.5 10H18.5C19.33 10 20 10.67 20 11.5V19.5C20 20.33 19.33 21 18.5 21H6.5C5.67 21 5 20.33 5 19.5V11.5C5 10.67 5.67 10 6.5 10Z" stroke="currentColor" stroke-width="1.8"/>
              </svg>
            </span>
            <input id="registerPassword" type="password" name="password" class="form-control" autocomplete="new-password" placeholder="••••••••" required>
            <button id="toggleRegisterPassword" class="btn btn-outline-secondary" type="button">Hiện</button>
          </div>
          <div class="sb-auth-help mt-2">Gợi ý: tối thiểu 6 ký tự.</div>
        </div>

        <div class="mb-2">
          <label class="form-label">Nhập lại mật khẩu</label>
          <div class="input-group">
            <span class="input-group-text" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M7 10V7.5C7 4.46 9.46 2 12.5 2C15.54 2 18 4.46 18 7.5V10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                <path d="M6.5 10H18.5C19.33 10 20 10.67 20 11.5V19.5C20 20.33 19.33 21 18.5 21H6.5C5.67 21 5 20.33 5 19.5V11.5C5 10.67 5.67 10 6.5 10Z" stroke="currentColor" stroke-width="1.8"/>
              </svg>
            </span>
            <input id="registerPassword2" type="password" name="password2" class="form-control" autocomplete="new-password" placeholder="••••••••" required>
          </div>
        </div>

        <div class="d-grid gap-2 mt-3">
          <button class="btn btn-primary">Đăng ký</button>
          <a class="btn btn-outline-dark" href="{{ url_for('login') }}">Đã có tài khoản? Đăng nhập</a>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const input = document.getElementById("registerPassword");
    const btn = document.getElementById("toggleRegisterPassword");
    if (!input || !btn) return;
    btn.addEventListener("click", () => {
      const isHidden = input.type === "password";
      input.type = isHidden ? "text" : "password";
      btn.textContent = isHidden ? "Ẩn" : "Hiện";
    });
  });
</script>
{% endblock %}
